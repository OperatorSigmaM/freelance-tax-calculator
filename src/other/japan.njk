---
layout: base.njk
title: Japan Tax Calculator 2026 | Japanese Income Tax Calculator
description: Free Japan tax calculator for 2026. Calculate income tax 5-45%, resident tax 10%, social insurance. Updated with reconstruction surtax and deductions.
permalink: /other/japan/
---

<style>

        /* –û—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞, —Å—Ç–∏–ª–∏ –º–µ–Ω—é –±–µ—Ä—É—Ç—Å—è –∏–∑ MegaNav.js */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            /* –û—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –Ω–∞–ø–æ–ª–∑–∞–ª –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é */
            padding: 110px 20px 40px; 
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            margin: 0 auto;
        }
        
        .state-badge {
            display: inline-block;
            background: linear-gradient(135deg, #BC002D 0%, #FFFFFF 50%, #BC002D 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        h2 {
            color: #667eea;
            margin-bottom: 20px;
            margin-top: 40px;
            font-size: 24px;
        }
        
        h3 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .label-hint {
            font-size: 12px;
            color: #666;
            font-weight: 400;
            margin-left: 5px;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: 600;
            color: #333;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .results {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            display: none;
        }
        
        .results.show {
            display: block;
        }
        
        .result-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .result-section:last-child {
            border-bottom: none;
        }
        
        .result-section-title {
            font-size: 14px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        
        .result-label {
            color: #666;
        }
        
        .result-value {
            color: #333;
            font-weight: 600;
        }
        
        .total-row .result-value {
            color: #667eea;
            font-size: 24px;
        }

        .content-section {
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
            line-height: 1.8;
            color: #333;
        }
        
        .content-section p {
            margin-bottom: 15px;
        }
        
        .content-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .content-section li {
            margin-bottom: 8px;
        }

        .tax-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }

        .tax-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .tax-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .tax-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .info {
            margin-top: 20px;
            padding: 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            font-size: 14px;
            color: #856404;
        }

        .highlight-box {
            background: #e7f3ff;
            border-left: 4px solid #0077BE;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            opacity: 0.8;
            font-size: 14px;
        }
    
</style>

<div class="container">
    <div class="state-badge">üáØüáµ JAPAN</div>
    <h1>Japan Tax Calculator 2026</h1>
    <p class="subtitle">Calculate income tax, resident tax, and social insurance for 2026</p>
    
    <div class="input-group">
        <label>Tax Residency Status</label>
        <select id="residency">
            <option value="resident">Resident (1+ year in Japan)</option>
            <option value="nonresident">Non-Resident (< 1 year)</option>
        </select>
    </div>
    
    <div class="input-group">
        <label>Annual Salary <span class="label-hint">- in JPY (¬•)</span></label>
        <input type="number" id="income" placeholder="e.g., 6000000" min="0">
    </div>

    <div id="residentFields">
        <div class="checkbox-group">
            <input type="checkbox" id="hasSocialIns" checked>
            <label for="hasSocialIns">üíº Employee with social insurance (health + pension + unemployment)</label>
        </div>
    </div>
    
    <button class="btn" onclick="calcTax()">Calculate Tax</button>
    
    <div class="results" id="results">
        <div class="result-section">
            <div class="result-section-title">üí∞ Income</div>
            <div class="result-row">
                <span class="result-label">Gross Salary</span>
                <span class="result-value" id="grossIncome"></span>
            </div>
            <div class="result-row" id="empDedRow">
                <span class="result-label">Employment Deduction</span>
                <span class="result-value" id="empDeduction"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Taxable Income</span>
                <span class="result-value" id="taxableIncome"></span>
            </div>
        </div>
        
        <div class="result-section" id="socialSection">
            <div class="result-section-title">üè• Social Insurance</div>
            <div class="result-row">
                <span class="result-label">Health Insurance (5%)</span>
                <span class="result-value" id="healthIns"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Pension (9.15%)</span>
                <span class="result-value" id="pensionIns"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Unemployment (0.6%)</span>
                <span class="result-value" id="unemployIns"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Total Social Insurance</span>
                <span class="result-value" id="totalSocial"></span>
            </div>
        </div>
        
        <div class="result-section">
            <div class="result-section-title">üáØüáµ Income Tax</div>
            <div class="result-row">
                <span class="result-label">National Income Tax</span>
                <span class="result-value" id="incomeTax"></span>
            </div>
            <div class="result-row" id="surtaxRow">
                <span class="result-label">Reconstruction Surtax (2.1%)</span>
                <span class="result-value" id="surtax"></span>
            </div>
        </div>
        
        <div class="result-section" id="residentTaxSection">
            <div class="result-section-title">üèòÔ∏è Resident Tax</div>
            <div class="result-row">
                <span class="result-label">Municipal + Prefectural (10%)</span>
                <span class="result-value" id="residentTax"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Per Capita Tax</span>
                <span class="result-value">¬•5,000</span>
            </div>
        </div>
        
        <div class="result-section">
            <div class="result-row total-row">
                <span class="result-label"><strong>Total Deductions</strong></span>
                <span class="result-value" id="totalTax"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Net Take-Home</span>
                <span class="result-value" id="netIncome"></span>
            </div>
            <div class="result-row">
                <span class="result-label">Effective Rate</span>
                <span class="result-value" id="effectiveRate"></span>
            </div>
        </div>
    </div>
    
    <div class="info">
        <strong>‚ö†Ô∏è Note:</strong> This calculator estimates Japanese taxes for 2026. Includes income tax (5-45%), reconstruction surtax (2.1%), resident tax (10%), and social insurance (~14.75%). Consult a Japanese tax advisor for accurate calculations.
    </div>
    
    <div class="content-section">
        <h2>Japan Tax System 2026</h2>
        
        <p>
            Japan has a complex tax system with progressive national income tax, flat local resident tax, and mandatory social insurance. Combined rates can reach 55% for high earners.
        </p>

        <h3>2026 National Income Tax Brackets</h3>
        
        <table class="tax-table">
            <thead>
                <tr>
                    <th>Taxable Income</th>
                    <th>Tax Rate</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>¬•0 - ¬•1,950,000</td><td>5%</td></tr>
                <tr><td>¬•1,950,001 - ¬•3,300,000</td><td>10%</td></tr>
                <tr><td>¬•3,300,001 - ¬•6,950,000</td><td>20%</td></tr>
                <tr><td>¬•6,950,001 - ¬•9,000,000</td><td>23%</td></tr>
                <tr><td>¬•9,000,001 - ¬•18,000,000</td><td>33%</td></tr>
                <tr><td>¬•18,000,001 - ¬•40,000,000</td><td>40%</td></tr>
                <tr><td>¬•40,000,001+</td><td>45%</td></tr>
            </tbody>
        </table>

        <div class="highlight-box">
            <strong>üèóÔ∏è Reconstruction Surtax (Âæ©ËààÁâπÂà•Á®é):</strong>
            <p style="margin-top: 10px;">An additional <strong>2.1% of your income tax</strong> applies until 2037 to fund reconstruction after the 2011 Tohoku earthquake and tsunami. This increases the effective top rate from 45% to 46%.</p>
        </div>

        <h3>Resident Tax (‰ΩèÊ∞ëÁ®é)</h3>

        <p>Local resident tax is levied by prefectures and municipalities:</p>

        <ul>
            <li><strong>Rate:</strong> 10% flat (6% municipal + 4% prefectural)</li>
            <li><strong>Calculation:</strong> Based on previous year's income</li>
            <li><strong>Per Capita Tax:</strong> ¬•5,000/year fixed amount</li>
            <li><strong>Payment:</strong> June, August, October, January (quarterly)</li>
        </ul>

        <h3>Social Insurance Contributions (2026)</h3>

        <table class="tax-table">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Employee Rate</th>
                    <th>Employer Rate</th>
                    <th>Annual Cap (Approx.)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Health Insurance</td><td>5%</td><td>5%</td><td>~¬•700,000</td></tr>
                <tr><td>Pension Insurance</td><td>9.15%</td><td>9.15%</td><td>~¬•780,000</td></tr>
                <tr><td>Unemployment Insurance</td><td>0.6%</td><td>0.95%</td><td>No Cap</td></tr>
                <tr><td><strong>Total Employee Rate</strong></td><td><strong>~14.75%</strong></td><td><strong>~15.1%</strong></td><td>‚Äî</td></tr>
            </tbody>
        </table>

        <p><strong>Note:</strong> Actual Social Insurance calculation uses Standard Monthly Compensation (Â†±ÈÖ¨ÊúàÈ°ç) and has annual caps, which are complex. This calculator uses a simplified percentage on annual income.</p>

        <h3>Tax Residency Categories</h3>

        <p>Japan classifies taxpayers into three categories:</p>

        <ul>
            <li><strong>Permanent Resident:</strong> Lived in Japan 5+ years, taxed on worldwide income</li>
            <li><strong>Non-Permanent Resident:</strong> Less than 5 years, taxed on Japan income + remitted foreign income</li>
            <li><strong>Non-Resident:</strong> Less than 1 year, taxed only on Japan-source income at flat 20.42%</li>
        </ul>

        <h3>Employment Income Deduction</h3>

        <p>Employees automatically get a deduction before calculating taxable income:</p>

        <table class="tax-table">
            <thead>
                <tr>
                    <th>Salary Income</th>
                    <th>Deduction</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Up to ¬•1.625M</td><td>¬•550,000</td></tr>
                <tr><td>¬•1.625M - ¬•1.8M</td><td>40% of income</td></tr>
                <tr><td>¬•1.8M - ¬•3.6M</td><td>30% + ¬•80,000</td></tr>
                <tr><td>¬•3.6M - ¬•6.6M</td><td>20% + ¬•440,000</td></tr>
                <tr><td>¬•6.6M - ¬•8.5M</td><td>10% + ¬•1,100,000</td></tr>
                <tr><td>Over ¬•8.5M</td><td>¬•1,950,000 (max)</td></tr>
            </tbody>
        </table>

        <h3>Basic Deduction</h3>

        <ul>
            <li><strong>Standard:</strong> ¬•480,000 for incomes up to ¬•24 million</li>
            <li><strong>Phase-out:</strong> Reduces for higher incomes</li>
            <li><strong>Zero:</strong> No deduction above ¬•25 million</li>
        </ul>

        <h3>Non-Resident Taxes</h3>

        <p>Non-residents pay a flat rate on gross Japan-source income:</p>

        <ul>
            <li><strong>Rate:</strong> 20.42% (includes 2.1% surtax)</li>
            <li><strong>No deductions</strong> available</li>
            <li><strong>Applied to:</strong> Salary, wages, employment income only</li>
            <li><strong>Resident tax:</strong> May apply if registered as of Jan 1</li>
        </ul>

        <h3>Tax Filing Deadlines</h3>

        <ul>
            <li><strong>Tax year:</strong> January 1 - December 31</li>
            <li><strong>Filing period:</strong> February 16 - March 15</li>
            <li><strong>Payment:</strong> Due by March 15 (or quarterly prepayments)</li>
            <li><strong>Resident tax:</strong> Paid quarterly (June, Aug, Oct, Jan)</li>
        </ul>

        <h3>Combined Tax Rate Example</h3>

        <p>For a salary of ¬•10 million:</p>

        <ul>
            <li>Income Tax: ~23% = ¬•2.3M</li>
            <li>Reconstruction Surtax: 2.1% of tax = ¬•48K</li>
            <li>Resident Tax: 10% = ¬•1M</li>
            <li>Social Insurance: ~14.75% = ¬•1.475M</li>
            <li><strong>Total:</strong> ~¬•4.823M (48.23% effective rate)</li>
        </ul>

        <h3>Pros and Cons</h3>

        <p><strong>Pros:</strong></p>
        <ul>
            <li>Excellent public healthcare</li>
            <li>Strong pension system</li>
            <li>Employment deductions reduce taxable income</li>
            <li>Non-permanent residents benefit from remittance rules</li>
        </ul>

        <p><strong>Cons:</strong></p>
        <ul>
            <li>Very high combined rates (up to 55%+)</li>
            <li>Complex system with multiple taxes</li>
            <li>Resident tax based on previous year (pay even if unemployed)</li>
            <li>High social insurance contributions (~30% total with employer)</li>
        </ul>
        
        <p>
            <strong>Important:</strong> This calculator provides estimates for Japanese taxes. The system is complex with many deductions and special cases. Always consult a Japanese tax professional (zeirishi) for accurate tax planning.
        </p>
    </div>
</div>

<footer>
  
</footer>

<script src="../MegaNav.js"></script>

<script>
function calcTax() {
    const inc = parseFloat(document.getElementById('income').value) || 0;
    const res = document.getElementById('residency').value;
    const hasSI = document.getElementById('hasSocialIns').checked;
    
    if (inc <= 0) {
        document.getElementById('results').classList.remove('show');
        return;
    }
    
    let tax = 0;
    let surtax = 0;
    let resTax = 0;
    let social = 0;
    let empDed = 0;
    let taxable = inc;
    
    // –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö –≤—ã—á–µ—Ç–æ–≤ —Å–æ—Ü. —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
    let healthIns = 0;
    let pensionIns = 0;
    let unemployIns = 0;
    
    if (res === 'resident') {
        // 1. Employment income deduction (ok)
        if (inc <= 1625000) {
            empDed = 550000;
        } else if (inc <= 1800000) {
            empDed = inc * 0.4;
        } else if (inc <= 3600000) {
            empDed = inc * 0.3 + 80000;
        } else if (inc <= 6600000) {
            empDed = inc * 0.2 + 440000;
        } else if (inc <= 8500000) {
            empDed = inc * 0.1 + 1100000;
        } else {
            empDed = 1950000;
        }
        
        // 2. Social insurance (Applying hard annual caps for high income)
if (hasSI) {
    const monthlyIncome = inc / 12;

    // Health Insurance Cap (approx. monthly cap ¬•1,390,000, max annual employee contribution ~¬•834,000)
    const healthCapMonth = 1390000;
    const healthRate = 0.05; // 5% employee rate
    healthIns = Math.min(monthlyIncome, healthCapMonth) * healthRate * 12;

    // Pension Insurance Cap (approx. monthly cap ¬•650,000, max annual employee contribution ~¬•713,700)
    const pensionCapMonth = 650000; 
    const pensionRate = 0.0915; // 9.15% employee rate
    pensionIns = Math.min(monthlyIncome, pensionCapMonth) * pensionRate * 12;

    // Unemployment Insurance (No standard cap, but 0.6% employee rate)
    const unemployRate = 0.006;
    unemployIns = inc * unemployRate;
    
    social = healthIns + pensionIns + unemployIns;
}
        
        // 3. Taxable income (gross - employment deduction - basic deduction - social insurance)
        // Basic deduction is standard ¬•480,000 for income < ¬•24M (simplified for this calculator)
        const basicDed = 480000;
        taxable = Math.max(0, inc - empDed - basicDed - social);
        
        // 4. Progressive income tax (ok)
        if (taxable <= 1950000) {
            tax = taxable * 0.05;
        } else if (taxable <= 3300000) {
            tax = 97500 + (taxable - 1950000) * 0.10;
        } else if (taxable <= 6950000) {
            tax = 232500 + 135000 + (taxable - 3300000) * 0.20; // 97500 + 135000 = 232500
            // Correction for marginal calculation: 97500 (10%) + 135000 (20%) + ...
            // Brackets: (1950000 * 0.05) = 97500
            // (3300000 - 1950000) * 0.10 = 135000
            // Sum: 232500. This is the tax paid on ¬•3,300,000.
            tax = 232500 + (taxable - 3300000) * 0.20;
        } else if (taxable <= 9000000) {
            // Tax paid on 6,950,000: 232500 + (6950000-3300000)*0.20 = 962500
            tax = 962500 + (taxable - 6950000) * 0.23;
        } else if (taxable <= 18000000) {
            // Tax paid on 9,000,000: 962500 + (9000000-6950000)*0.23 = 1434000
            tax = 1434000 + (taxable - 9000000) * 0.33;
        } else if (taxable <= 40000000) {
            // Tax paid on 18,000,000: 1434000 + (18000000-9000000)*0.33 = 4404000
            tax = 4404000 + (taxable - 18000000) * 0.40;
        } else {
            // Tax paid on 40,000,000 is correctly 13,330,000 JPY
            tax = 13330000 + (taxable - 40000000) * 0.45;
        }
        
        // 5. Reconstruction surtax (2.1% of income tax) (ok)
        surtax = tax * 0.021;
        
        // 6. Resident tax (10% of taxable + ¬•5000 per capita) (ok)
        resTax = taxable * 0.10 + 5000;
        
    } else {
        // Non-resident: flat 20.42% on gross
        tax = inc * 0.20; // 20%
        surtax = tax * 0.021; // 2.1% of the 20% tax amount
        empDed = 0;
        resTax = 0;
        social = 0;
    }
    
    const total = tax + surtax + resTax + social;
    const net = inc - total;
    const eff = (total / inc * 100).toFixed(2); // –ü–æ–º–µ–Ω—è–ª toFixed(1) –Ω–∞ toFixed(2) –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
    
    // --- DISPLAY LOGIC (FIXED) ---
    const format = (num) => '¬•' + Math.round(num).toLocaleString('en-US');

    document.getElementById('grossIncome').textContent = format(inc);
    
    if (res === 'resident') {
        document.getElementById('empDedRow').style.display = 'flex';
        document.getElementById('empDeduction').textContent = '-' + format(empDed);
        document.getElementById('surtaxRow').style.display = 'flex';
        document.getElementById('residentTaxSection').style.display = 'block';
    } else {
        document.getElementById('empDedRow').style.display = 'none';
        // Non-resident still pays surtax on the 20% tax
        document.getElementById('surtaxRow').style.display = 'flex'; 
        document.getElementById('residentTaxSection').style.display = 'none';
    }
    
    document.getElementById('taxableIncome').textContent = format(taxable);
    
    if (hasSI && res === 'resident') {
        document.getElementById('socialSection').style.display = 'block';
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
        document.getElementById('healthIns').textContent = format(healthIns);
        document.getElementById('pensionIns').textContent = format(pensionIns);
        document.getElementById('unemployIns').textContent = format(unemployIns);
        document.getElementById('totalSocial').textContent = format(social);
    } else {
        document.getElementById('socialSection').style.display = 'none';
    }
    
    document.getElementById('incomeTax').textContent = format(tax);
    document.getElementById('surtax').textContent = format(surtax);
    
    if (res === 'resident') {
        // resident tax display (minus the fixed per capita part)
        document.getElementById('residentTax').textContent = format(resTax - 5000); 
    }
    
    document.getElementById('totalTax').textContent = format(total);
    document.getElementById('netIncome').textContent = format(net);
    document.getElementById('effectiveRate').textContent = eff + '%';
    
    document.getElementById('results').classList.add('show');
}

document.getElementById('income').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') calcTax();
});

document.getElementById('residency').addEventListener('change', function() {
    const show = this.value === 'resident';
    document.getElementById('residentFields').style.display = show ? 'block' : 'none';
    // Rerun calculation on residency change
    calcTax();
});

// Run calculation on load
document.addEventListener('DOMContentLoaded', calcTax);
</script>

<script>

function calcTax() {
    const inc = parseFloat(document.getElementById('income').value) || 0;
    const res = document.getElementById('residency').value;
    const hasSI = document.getElementById('hasSocialIns').checked;
    
    if (inc <= 0) {
        document.getElementById('results').classList.remove('show');
        return;
    }
    
    let tax = 0;
    let surtax = 0;
    let resTax = 0;
    let social = 0;
    let empDed = 0;
    let taxable = inc;
    
    // –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö –≤—ã—á–µ—Ç–æ–≤ —Å–æ—Ü. —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
    let healthIns = 0;
    let pensionIns = 0;
    let unemployIns = 0;
    
    if (res === 'resident') {
        // 1. Employment income deduction (ok)
        if (inc <= 1625000) {
            empDed = 550000;
        } else if (inc <= 1800000) {
            empDed = inc * 0.4;
        } else if (inc <= 3600000) {
            empDed = inc * 0.3 + 80000;
        } else if (inc <= 6600000) {
            empDed = inc * 0.2 + 440000;
        } else if (inc <= 8500000) {
            empDed = inc * 0.1 + 1100000;
        } else {
            empDed = 1950000;
        }
        
        // 2. Social insurance (Applying hard annual caps for high income)
if (hasSI) {
    const monthlyIncome = inc / 12;

    // Health Insurance Cap (approx. monthly cap ¬•1,390,000, max annual employee contribution ~¬•834,000)
    const healthCapMonth = 1390000;
    const healthRate = 0.05; // 5% employee rate
    healthIns = Math.min(monthlyIncome, healthCapMonth) * healthRate * 12;

    // Pension Insurance Cap (approx. monthly cap ¬•650,000, max annual employee contribution ~¬•713,700)
    const pensionCapMonth = 650000; 
    const pensionRate = 0.0915; // 9.15% employee rate
    pensionIns = Math.min(monthlyIncome, pensionCapMonth) * pensionRate * 12;

    // Unemployment Insurance (No standard cap, but 0.6% employee rate)
    const unemployRate = 0.006;
    unemployIns = inc * unemployRate;
    
    social = healthIns + pensionIns + unemployIns;
}
        
        // 3. Taxable income (gross - employment deduction - basic deduction - social insurance)
        // Basic deduction is standard ¬•480,000 for income < ¬•24M (simplified for this calculator)
        const basicDed = 480000;
        taxable = Math.max(0, inc - empDed - basicDed - social);
        
        // 4. Progressive income tax (ok)
        if (taxable <= 1950000) {
            tax = taxable * 0.05;
        } else if (taxable <= 3300000) {
            tax = 97500 + (taxable - 1950000) * 0.10;
        } else if (taxable <= 6950000) {
            tax = 232500 + 135000 + (taxable - 3300000) * 0.20; // 97500 + 135000 = 232500
            // Correction for marginal calculation: 97500 (10%) + 135000 (20%) + ...
            // Brackets: (1950000 * 0.05) = 97500
            // (3300000 - 1950000) * 0.10 = 135000
            // Sum: 232500. This is the tax paid on ¬•3,300,000.
            tax = 232500 + (taxable - 3300000) * 0.20;
        } else if (taxable <= 9000000) {
            // Tax paid on 6,950,000: 232500 + (6950000-3300000)*0.20 = 962500
            tax = 962500 + (taxable - 6950000) * 0.23;
        } else if (taxable <= 18000000) {
            // Tax paid on 9,000,000: 962500 + (9000000-6950000)*0.23 = 1434000
            tax = 1434000 + (taxable - 9000000) * 0.33;
        } else if (taxable <= 40000000) {
            // Tax paid on 18,000,000: 1434000 + (18000000-9000000)*0.33 = 4404000
            tax = 4404000 + (taxable - 18000000) * 0.40;
        } else {
            // Tax paid on 40,000,000 is correctly 13,330,000 JPY
            tax = 13330000 + (taxable - 40000000) * 0.45;
        }
        
        // 5. Reconstruction surtax (2.1% of income tax) (ok)
        surtax = tax * 0.021;
        
        // 6. Resident tax (10% of taxable + ¬•5000 per capita) (ok)
        resTax = taxable * 0.10 + 5000;
        
    } else {
        // Non-resident: flat 20.42% on gross
        tax = inc * 0.20; // 20%
        surtax = tax * 0.021; // 2.1% of the 20% tax amount
        empDed = 0;
        resTax = 0;
        social = 0;
    }
    
    const total = tax + surtax + resTax + social;
    const net = inc - total;
    const eff = (total / inc * 100).toFixed(2); // –ü–æ–º–µ–Ω—è–ª toFixed(1) –Ω–∞ toFixed(2) –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
    
    // --- DISPLAY LOGIC (FIXED) ---
    const format = (num) => '¬•' + Math.round(num).toLocaleString('en-US');

    document.getElementById('grossIncome').textContent = format(inc);
    
    if (res === 'resident') {
        document.getElementById('empDedRow').style.display = 'flex';
        document.getElementById('empDeduction').textContent = '-' + format(empDed);
        document.getElementById('surtaxRow').style.display = 'flex';
        document.getElementById('residentTaxSection').style.display = 'block';
    } else {
        document.getElementById('empDedRow').style.display = 'none';
        // Non-resident still pays surtax on the 20% tax
        document.getElementById('surtaxRow').style.display = 'flex'; 
        document.getElementById('residentTaxSection').style.display = 'none';
    }
    
    document.getElementById('taxableIncome').textContent = format(taxable);
    
    if (hasSI && res === 'resident') {
        document.getElementById('socialSection').style.display = 'block';
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
        document.getElementById('healthIns').textContent = format(healthIns);
        document.getElementById('pensionIns').textContent = format(pensionIns);
        document.getElementById('unemployIns').textContent = format(unemployIns);
        document.getElementById('totalSocial').textContent = format(social);
    } else {
        document.getElementById('socialSection').style.display = 'none';
    }
    
    document.getElementById('incomeTax').textContent = format(tax);
    document.getElementById('surtax').textContent = format(surtax);
    
    if (res === 'resident') {
        // resident tax display (minus the fixed per capita part)
        document.getElementById('residentTax').textContent = format(resTax - 5000); 
    }
    
    document.getElementById('totalTax').textContent = format(total);
    document.getElementById('netIncome').textContent = format(net);
    document.getElementById('effectiveRate').textContent = eff + '%';
    
    document.getElementById('results').classList.add('show');
}

document.getElementById('income').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') calcTax();
});

document.getElementById('residency').addEventListener('change', function() {
    const show = this.value === 'resident';
    document.getElementById('residentFields').style.display = show ? 'block' : 'none';
    // Rerun calculation on residency change
    calcTax();
});

// Run calculation on load
document.addEventListener('DOMContentLoaded', calcTax);

</script>